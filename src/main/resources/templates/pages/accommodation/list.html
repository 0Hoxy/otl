<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>숙소 목록</title>
    <!-- 부트스트랩 CSS 포함 -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- 커스텀 CSS -->
    <style>
        body {
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: #ffffff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .form-control, .btn {
            border-radius: 0.25rem;
        }
        .card {
            border: none;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            overflow: hidden;
            text-decoration: none;
        }
        .card-img-top {
            height: 200px;
            object-fit: cover;
        }
        .card-body {
            padding: 15px;
        }
        .category ul {
            list-style: none;
            padding: 0;
        }
        .category li {
            display: inline;
            margin-right: 10px;
        }
        .category a {
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
        }
        .category a:hover {
            text-decoration: underline;
        }
        .btn-primary {
            background-color: #007bff;
            border: none;
        }
        .btn-primary:hover {
            background-color: #0056b3;
        }
        .search-form {
            margin-bottom: 30px;
        }
        .card-link {
            text-decoration: none;
            color: inherit;
        }
    </style>
</head>
<body>
<div class="container">
    <a href="http://localhost:8080/accommodation/business/list">사업자 숙소관리</a>
    <h1 class="my-4 text-center">숙소 목록</h1>
    <form th:action="@{/accommodation/search}" method="get" class="search-form">
        <div class="form-row align-items-center">
            <div class="col-auto">
                <select class="form-control mb-2" id="themeName" name="themeName">
                    <option value="">-- 선택 --</option>
                    <option value="호텔">호텔</option>
                    <option value="펜션">펜션</option>
                    <option value="모텔">모텔</option>
                    <option value="리조트">리조트</option>
                </select>
            </div>
            <div class="col-auto">
                <input type="text" name="searchContent" class="form-control mb-2" placeholder="지역 또는 숙소명 검색">
            </div>
            <div class="col-auto">
                <input type="date" id="checkInDate" name="checkInDate" class="form-control mb-2" placeholder="체크인 날짜" required>
            </div>
            <div class="col-auto">
                <input type="date" id="checkOutDate" name="checkOutDate" class="form-control mb-2" placeholder="체크아웃 날짜" required>
            </div>
            <div class="col-auto">
                <input type="number" name="peopleCnt" class="form-control mb-2" placeholder="인원 수" min="1" required>
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary mb-2">검색</button>
            </div>
        </div>
    </form>
    <div class="mb-4">
        <button class="btn btn-primary mb-2" onclick="window.location.href='http://localhost:8080/accommodation/list'">
            전체목록
        </button>
    </div>
    <div class="category mb-4">
        <ul>
            <li><a href="http://localhost:8080/accommodation/list/호텔">호텔</a></li>
            <li><a href="http://localhost:8080/accommodation/list/모텔">모텔</a></li>
            <li><a href="http://localhost:8080/accommodation/list/펜션">펜션</a></li>
            <li><a href="http://localhost:8080/accommodation/list/리조트">리조트</a></li>
        </ul>
    </div>
    <div class="row">
        <div class="col-md-4 mb-4" th:each="accommodation : ${accommodations}">
            <a th:href="@{/accommodation/detail/{id}(id=${accommodation.accommodationId}, checkInDate=${param.checkInDate}, checkOutDate=${param.checkOutDate}, peopleCnt=${param.peopleCnt})}" class="card card-link">
                <img src="#" th:src="@{${accommodation.pictureUrl}}" class="card-img-top" alt="숙소 이미지">
                <div class="card-body">
                    <h5 class="card-title" th:text="${accommodation.accommodationName}">숙소명</h5>
                    <p class="card-text"><strong>50,000원</strong></p>
                </div>
            </a>
        </div>
    </div>
</div>

<!-- 자바스크립트 -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkInDateInput = document.getElementById('checkInDate');
        const checkOutDateInput = document.getElementById('checkOutDate');

        // 오늘 날짜를 구합니다.
        const today = new Date().toISOString().split('T')[0];

        // 체크인 날짜의 기본 최소 값을 오늘 날짜로 설정합니다.
        checkInDateInput.setAttribute('min', today);

        // 체크인 날짜의 변경 이벤트를 처리합니다.
        checkInDateInput.addEventListener('change', function() {
            // 선택한 체크인 날짜를 가져옵니다.
            const checkInDate = checkInDateInput.value;

            // 체크인 날짜가 선택되지 않았거나 잘못된 날짜일 경우 기본값을 설정합니다.
            if (!checkInDate) {
                checkOutDateInput.setAttribute('min', today); // 오늘 날짜를 기본값으로 설정
                return;
            }

            // 체크아웃 날짜의 최소 값을 체크인 날짜로 설정합니다.
            checkOutDateInput.setAttribute('min', checkInDate);
        });

        // 체크아웃 날짜의 기본 최소 값을 체크인 날짜의 현재 값으로 설정합니다.
        checkOutDateInput.setAttribute('min', today);
    });
</script>
</body>
</html>
