<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>항공편 검색</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4">항공편 검색</h2>
<!--    <form action="/fl/flightList" method="get">-->
    <form th:action="@{/fld/flightList}" method="post">
<!--    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
<!--    <form id="searchFlightForm" method="post">-->
        <div class="row g-3">
            <div class="col-12">
<!--                <div class="btn-group" role="group" aria-label="Flight type">-->
<!--                    <input type="radio" class="btn-check" name="flightType" autocomplete="off" id="domestic" checked>-->
<!--                    <label class="btn btn-outline-primary" for="domestic">국내선</label>-->
<!--                    <input type="radio" class="btn-check" name="flightType" autocomplete="off" id="international">-->
<!--                    <label class="btn btn-outline-primary" for="international">국제선</label>-->
<!--                </div>-->

                <div class="btn-group" role="group" aria-label="Trip type">
                    <input type="radio" class="btn-check" name="tripType" id="oneWay" autocomplete="off" checked>
                    <label class="btn btn-outline-primary" for="oneWay">편도</label>
                    <input type="radio" class="btn-check" name="tripType" id="roundTrip" autocomplete="off">
                    <label class="btn btn-outline-primary" for="roundTrip">왕복</label>
                </div>
            </div>

            <div class="col-md-6">
                <label for="startPortName" class="form-label">출발지</label>
                <select class="form-select" id="startPortName" name="startPortName" required>
                    <option value="">출발지 선택</option>
                    <option value="NAARKJJ">광주</option>
                    <option value="NAARKJK">군산</option>
                    <option value="NAARKSS">김포</option>
                    <option value="NAARKPK">김해/부산</option>
                    <option value="NAARKTN">대구</option>
                    <option value="NAARKPS">사천</option>
                    <option value="NAARKNY">양양</option>
                    <option value="NAARKJY">여수</option>
                    <option value="NAARKPU">울산</option>
                    <option value="NAARKNW">원주</option>
                    <option value="NAARKSI">인천</option>
                    <option value="NAARKPC">제주</option>
                    <option value="NAARKTU">청주</option>
                    <option value="NAARKTH">포항</option>
                </select>
            </div>
            <div class="col-md-6">
                <label for="endPortName" class="form-label">도착지</label>
                <select class="form-select" id="endPortName" name="endPortName" required>
                    <option value="">도착지 선택</option>
                    <option value="NAARKJJ">광주</option>
                    <option value="NAARKJK">군산</option>
                    <option value="NAARKSS">김포</option>
                    <option value="NAARKPK">김해/부산</option>
                    <option value="NAARKTN">대구</option>
                    <option value="NAARKPS">사천</option>
                    <option value="NAARKNY">양양</option>
                    <option value="NAARKJY">여수</option>
                    <option value="NAARKPU">울산</option>
                    <option value="NAARKNW">원주</option>
                    <option value="NAARKSI">인천</option>
                    <option value="NAARKPC">제주</option>
                    <option value="NAARKTU">청주</option>
                    <option value="NAARKTH">포항</option>
                </select>
            </div>

            <div class="col-md-6">
                <label for="startDate" class="form-label">출발 날짜</label>
                <input type="text" class="form-control datepicker" id="startDate" name="date_start" required>
            </div>
            <div class="col-md-6" id="endDateContainer" style="display: none;">
                <label for="endDate" class="form-label">도착 날짜</label>
                <input type="text" class="form-control datepicker" id="endDate" name="endDate">
            </div>
            <div class="col-md-6">
                <label for="airline" class="form-label">항공사 (선택사항)</label>
                <select class="form-select" id="airline" name="airline">
                    <option value="">모든 항공사</option>
                    <option value="AAR">아시아나항공</option>
                    <option value="ABL">에어부산</option>
                    <option value="ASV">에어서울</option>
                    <option value="ESR">이스타항공</option>
                    <option value="FGW">플라이강원</option>
                    <option value="JJA">제주항공</option>
                    <option value="JNA">진에어</option>
                    <option value="KAL">대한항공</option>
                    <option value="TWB">티웨이항공</option>
                </select>
            </div>

            <div class="col-12">
                <button type="submit" class="btn btn-primary">항공편 검색</button>
            </div>
        </div>
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script>
        $(document).ready(function() {
            var today = new Date();
            var futureDate = new Date();
            futureDate.setDate(today.getDate() + 3);

            $('.datepicker').datepicker({
                format: 'yyyy-mm-dd',
                autoclose: true,
                startDate: 'today',
                language: 'ko'
            });

            // 기본값 설정
            $('#startDate').datepicker('setDate', futureDate);
        });

        // 왕복 여행 선택 시 도착 날짜 입력 필드 표시
        $('input[name="tripType"]').change(function() {
            if ($('#roundTrip').is(':checked')) {
                $('#endDateContainer').show();
                $('#endDate').prop('required', true); // 필수 입력 필드로 설정
            } else {
                $('#endDateContainer').hide();
                $('#endDate').prop('required', false); // 필수 입력 필드 해제
            }
        });

        // $('input[name="flightType"]').flightchange(function(){
        //     if ($('#international').is(':checked')) {
        //          // 국제선 선택 시 어쩌고 실행할 코드 작성
        //         } else {
        //              $('#endDate').prop('required', false);
        //         }
        // });
</script>
</body>
</html>
