<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>항공편 검색 결과</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4">항공편 검색 결과</h2>

    <!-- 검색 조건 요약 -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">검색 조건</h5>
            <p class="card-text">
                출발지: <span th:text="${fhlist.startPortName + ' (' + flist[flist.size() - 1].depAirportNm} + ' 공항)' "></span><br>
                도착지: <span th:text="${fhlist.endPortName + ' (' + flist[flist.size() - 1].arrAirportNm} + ' 공항)' "></span><br>
                출발 날짜: <span th:text="${fhlist.startDate}"></span><br>
                항공사: <span th:text="${fhlist.airline != '' ? fhlist.airline : '모든 항공사'}"></span>
            </p>
        </div>
    </div>

    <!-- 검색 결과 -->
    <div th:if="${not #lists.isEmpty(flist)}">
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>항공편명</th>
                    <th>항공사</th>
                    <th>출발시간</th>
                    <th>도착시간</th>
                    <th>일반석 요금</th>
                    <th>비즈니스석 요금</th>
                    <th>출발공항</th>
                    <th>도착공항</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="flight : ${flist}">
                    <td th:text="${flight.vihicleId}"></td>
                    <td th:text="${flight.airlineNm}"></td>
<!--                    <td th:text="${#dates.format(flight.depPlandTime, 'yyyy-MM-dd HH:mm')}"></td>-->
<!--                    <td th:text="${#dates.format(flight.arrPlandTime, 'yyyy-MM-dd HH:mm')}"></td>-->
                    <td th:text="${#strings.substring(flight.depPlandTime,0,4) + '-' + #strings.substring(flight.depPlandTime,4,6) + '-' + #strings.substring(flight.depPlandTime,6,8) + ' ' + #strings.substring(flight.depPlandTime,8,10) + ':' + #strings.substring(flight.depPlandTime,10,12)}"></td>
                    <td th:text="${#strings.substring(flight.arrPlandTime,0,4) + '-' + #strings.substring(flight.arrPlandTime,4,6) + '-' + #strings.substring(flight.arrPlandTime,6,8) + ' ' + #strings.substring(flight.arrPlandTime,8,10) + ':' + #strings.substring(flight.arrPlandTime,10,12)}"></td>
                    <td th:text="${#numbers.formatDecimal(flight.economyCharge, 0, 'COMMA', 0, 'POINT')} + '원'"></td>
<!--                    <td th:text="${#numbers.formatDecimal(flight.prestigeCharge, 0, 'COMMA', 0, 'POINT')} + '원'"></td>-->
                    <td th:text="${flight.prestigeCharge == 0 ? '-' : #numbers.formatDecimal(flight.prestigeCharge, 0, 'COMMA', 0, 'POINT') + '원'}"></td>
                    <td th:text="${flight.depAirportNm}"></td>
                    <td th:text="${flight.arrAirportNm}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 검색 결과가 없을 경우 -->
    <div th:if="${#lists.isEmpty(flist)}" class="alert alert-info" role="alert">
        조건에 맞는 항공편이 없습니다. 다른 조건으로 다시 검색해 주세요.
    </div>

    <!-- 페이지네이션 (필요한 경우) -->


    <div class="mt-4">
        <a href="/fl/flight" class="btn btn-primary">새로운 검색</a>
    </div>

    <!-- 페이징 -->
<!--    <nav aria-label="Page navigation" class="mt-4" th:if="${totalPages > 1}">-->
<!--        <ul class="pagination justify-content-center">-->
<!--            <li class="page-item" th:classappend="${currentPage <= 1} ? 'disabled'">-->
<!--                <a class="page-link" th:href="@{/fl/flightList(startPortName=${fhlist.startPortName},endPortName=${fhlist.endPortName},date_start=${fhlist.startDate},airline=${fhlist.airline},pageNum=${currentPage - 1})}" aria-label="Previous">-->
<!--                    <span aria-hidden="true">&laquo;</span>-->
<!--                </a>-->
<!--            </li>-->
<!--            <li class="page-item" th:each="pageNum : ${#numbers.sequence(1, totalPages)}"-->
<!--                th:classappend="${pageNum == currentPage} ? 'active'">-->
<!--                <a class="page-link" th:href="@{/fl/flightList(startPortName=${fhlist.startPortName},endPortName=${fhlist.endPortName},date_start=${fhlist.startDate},airline=${fhlist.airline},pageNum=${pageNum})}"-->
<!--                   th:text="${pageNum}"></a>-->
<!--            </li>-->
<!--            <li class="page-item" th:classappend="${currentPage >= totalPages} ? 'disabled'">-->
<!--                <a class="page-link" th:href="@{/fl/flightList(startPortName=${fhlist.startPortName},endPortName=${fhlist.endPortName},date_start=${fhlist.startDate},airline=${fhlist.airline},pageNum=${currentPage + 1})}" aria-label="Next">-->
<!--                    <span aria-hidden="true">&raquo;</span>-->
<!--                </a>-->
<!--            </li>-->
<!--        </ul>-->
<!--    </nav>-->
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</body>
</html>